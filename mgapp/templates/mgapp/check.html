{% load static %}
<!-- /*
* Template Name: Tour
* Template Author: Untree.co
* Tempalte URI: https://untree.co/
* License: https://creativecommons.org/licenses/by/3.0/
*/ -->
<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="author" content="Untree.co">
	<link rel="shortcut icon" href="favicon.png">

	<meta name="description" content="" />
	<meta name="keywords" content="bootstrap, bootstrap4" />

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Source+Serif+Pro:wght@400;700&display=swap" rel="stylesheet">

	<link rel="stylesheet" href="{% static 'mgapp/css/bootstrap.min.css'%}">
	<link rel="stylesheet" href="{% static 'mgapp/css/owl.carousel.min.css'%}">
	<link rel="stylesheet" href="{% static 'mgapp/css/owl.theme.default.min.css'%}">
	<link rel="stylesheet" href="{% static 'mgapp/css/jquery.fancybox.min.css'%}">
	<link rel="stylesheet" href="{% static 'mgapp/fonts/icomoon/style.css'%}">
	<link rel="stylesheet" href="{% static 'mgapp/fonts/flaticon/font/flaticon.css'%}">
	<link rel="stylesheet" href="{% static 'mgapp/css/daterangepicker.css'%}">
	<link rel="stylesheet" href="{% static 'mgapp/css/aos.css'%}">
	<link rel="stylesheet" href="{% static 'mgapp/css/style.css'%}">
	<link rel="stylesheet" type="text/css" href="https://etk.srail.kr/css/common.css" />
	<link rel="stylesheet" type="text/css" href="https://etk.srail.kr/css/jquery-ui.css" />
	<link rel="stylesheet" type="text/css" href="https://etk.srail.kr/css/swiper-bundle.min.css" />

	<link rel="stylesheet" type="text/css" href="https://etk.srail.kr/css/ticket.css" />

	<title>해상택시 예약 서비스</title>
	<style>
		
	</style>
</head>

<body>


	<div class="site-mobile-menu site-navbar-target">
		<div class="site-mobile-menu-header">
			<div class="site-mobile-menu-close">
				<span class="icofont-close js-menu-toggle"></span>
			</div>
		</div>
		<div class="site-mobile-menu-body"></div>
	</div>

	<nav class="site-nav">

			<div class="site-navigation">
				<a href="/mg/home/" class="logo m-0">bigwave</a> 
				{% comment %} <span class="text-primary">bigwave</span> {% endcomment %}

				<ul class="js-clone-nav d-none d-lg-inline-block text-left site-menu float-right">
					<li class="active"><a href="/mg/test/">선착장예약</a></li>
					<li class="has-children">
						<a href="#">부가 서비스</a>
						<ul class="dropdown">
							<li class="has-children">
								<a href="#">선착장</a>
								<ul class="dropdown">
									<li><a href="#">다대선착장</a></li>
									<li><a href="#">동삼선착장</a></li>
									<li><a href="#">미포선착장</a></li>
									<li><a href="#">자갈치선착장</a></li>
								</ul>
							</li>
						</ul>
					</li>
					{% if request.session.ses_mem_id == None %}
					<li><a href="/login2/">로그인</a></li>
					<li><a href="/signup2/">회원가입</a></li>
					{% else %}
					<li><a href="/mg/booking/">예약확인</a></li>
					<li><a href="/mypage/">회원정보</a></li>
					<li><a href="/mg/logout/">로그아웃</a></li>
					{% endif %}
				</ul>

				<a href="#" class="burger ml-auto float-right site-menu-toggle js-menu-toggle d-inline-block d-lg-none light" data-toggle="collapse" data-target="#main-navbar">
					<span></span>
				</a>

			</div>
	</nav>

	<div class="container container-e">
		<!-- <a href="" class="blind" id="container">본문 시작지점</a> -->	
		<div class="sub_wrap">
			<!-- //sub_tit_area -->
			
	
	
	
	
		<div class="sub_tit_area">
			<h2>결제하기</h2>
			<div class="sub_loc_area">
			</div>
		</div><!-- //sub_tit_area -->
	
			<!-- //tab_area -->

		<div class="gap20"></div>
	
	
	
			<div class="sub_con_area">
				<div class="box2">
					<div class="li_type1">
						<fieldset>
							<h3 style="color: red; font-size: 30px; text-align: center;">[주의사항]</h3>
							<b>본 약관을 확인하지 않고 예약을 진행하여 발생한 모든 불이익에 대해 책임지지 않습니다.</br>
							예약하시는 고객님은 본 필독사항과 환불규정에 대하여 동의한 것으로 간주합니다.</b></br></br>
							<p style="font-size: 120%;"><span style="color: red;">></span> 승선시 반드시 신분증 지참해 주세요. 미성년자 증빙서류(등본 등) 지참하셔야 합니다. (*미지참시 승선 불가)</br></p>
							<p style="font-size: 120%;"><span style="color: red;">></span> 승선마감시간 까지 탑승하지 못 할 경우 탑승이 거부될 수 있습니다.</br></p>
							<p style="font-size: 120%;"><span style="color: red;">></span> 주의사항 미이행 및 본인부주의로 사고 발생시 책임을 지지 않습니다.</br></p>
							<p style="font-size: 120%;"><span style="color: red;">></span> 음식물 반입이 금지되어 있습니다.</br></p>
							<p style="font-size: 120%;"><span style="color: red;">></span> 기상상태, 천재지변, 선박의 이상상태 등의 예기치 못한 사항으로 운행이 불가할 경우 출항시간이 지연 또는 취소될 수 있으며 문자메세지를 통해 공지합니다. 해당 사항의 경우 전액환불됩니다.</br></p>
							<p style="font-size: 120%;"><span style="color: red;">></span> 비상상황발생 및 승무원의 지시가 있을 경우 구명조끼를 착용하여 주세요.</br></p>
						</fieldset>	
					</div>
				</div> 
				
				<div class="gap20"></div>
				<form name="input-form" action="{% url 'save_reservation' %}" method="post"> 
					<fieldset>
					<div class="gap30"></div>
						<div class="box2">
								<div class="row">
									<div class="col-12">
										{% csrf_token %}
										<fieldset>
											<legend><h3>[예약확인]</h3></legend>
											<p style="font-size: 130%;">* 예약 일시 : <span id="reservationTime" style="font-size: 105%;"></span></br></p>
											<p style="font-size: 130%;">* 탑승 장소 : {{ selected_schedule.sch_marina }}</span></br></p>
											<p style="font-size: 130%;">* 도착 장소 : {{ selected_schedule.sch_arrival }}</span></br></p>
											<p style="font-size: 130%;">* 승차 시간 : {{ selected_schedule.sch_stime }}</span></br></p>
											<p style="font-size: 130%;">* 하차 시간 : {{ selected_schedule.sch_etime }}</span></br></p>
											<p style="font-size: 130%;">* 예약 인원 : <span id="qty" style="font-size: 105%;"></span>명</br></p>
											<p style="font-size: 130%;">* 결제 금액 : <span id="totalAmount" style="font-size: 105%;"></span>원</p>
											<!-- 숨겨진 입력 필드로 예약 정보를 서버로 전송 -->
											<input type="hidden" name="book_qty" id="input_qty">
											<input type="hidden" name="book_schedule" value="{{ selected_schedule.id }}">
											<input type="hidden" name="selected_schedule" id="input_selected_schedule">
										</fieldset>
									</div>
								</div>		
						</div>
						<div class="gap10"></div>
						<div class="tal_r val_m">
							☞ 위와 같이  필독사항과 환불규정에 대하여 동의하십니까?<strong>(필수)</strong>
							<label for="agreeY">동의</label>
							<input type="radio" name="agree" id="agreeY" class="checkForm checkbox" value="Y" option="{isMust : true, message : '개인정보 수집 및 이용 동의 여부를 선택하십시오.'}" />
							&nbsp;&nbsp;&nbsp;&nbsp;
							<label for="agreeN">미동의</label>
							<input type="radio" name="agree" id="agreeN" class="checkForm checkbox" value="N" option="{isMust : true, message : '개인정보 수집 및 이용 동의 여부를 선택하십시오.'}" />
						</div>
						<div class="gap50"></div>
						<div class="tbl_wrap tbl3">

						</div>
			
						<div class="gap50"></div>
						<div class="tal_c">
							<button onclick="goBack()" class="btn_large btn_blue_dark val_m"><b>취소</b></button>
							<button type="submit" class="btn_large btn_blue_dark val_m"><b>결제</b></button>	
						</div>
					</fieldset>
				</form>
	
			</div><!-- //sub_con_area -->
		</div>
	</div>
    
    <script>
        //취소하기
        function goBack(){
            history.go(-1);
        }
        const now = new Date();
        const formattedTime = `${now.getFullYear()}년 ${String(now.getMonth() + 1).padStart(2, '0')}월 ${String(now.getDate()).padStart(2, '0')}일 ${String(now.getHours()).padStart(2, '0')}시 ${String(now.getMinutes()).padStart(2, '0')}분`;

        document.getElementById('reservationTime').innerText = formattedTime;

        // URL의 쿼리 매개변수를 추출하고 표시하는 JavaScript 코드
        const urlParams = new URLSearchParams(window.location.search);
        const selectedSchNo = urlParams.get('selected_schedule');
        const qtyValue = urlParams.get('qty');

        document.getElementById('input_selected_schedule').value = selectedSchNo;
        document.getElementById('qty').innerText = qtyValue;
        document.getElementById('input_qty').value = qtyValue;

        const paymentAmount = qtyValue * 20000;
        document.getElementById('totalAmount').innerText = paymentAmount.toLocaleString();
        document.getElementById('input_totalAmount').value = paymentAmount;
    </script>

    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js" ></script>

	<div id="overlayer"></div>
	<div class="loader">
		<div class="spinner-border" role="status">
			<span class="sr-only">Loading...</span>
		</div>
	</div>
	<script>
		//취소하기
		function goBack(){
			history.go(-1);
		}
		const now = new Date();
		const formattedTime = `${now.getFullYear()}년 ${String(now.getMonth() + 1).padStart(2, '0')}월 ${String(now.getDate()).padStart(2, '0')}일 ${String(now.getHours()).padStart(2, '0')}시 ${String(now.getMinutes()).padStart(2, '0')}분`;

		document.getElementById('reservationTime').innerText = formattedTime;

		// URL의 쿼리 매개변수를 추출하고 표시하는 JavaScript 코드
		const urlParams = new URLSearchParams(window.location.search);
		const selectedSchNo = urlParams.get('selected_schedule');
		const qtyValue = urlParams.get('qty');

		document.getElementById('input_selected_schedule').value = selectedSchNo;
		document.getElementById('qty').innerText = qtyValue;
		document.getElementById('input_qty').value = qtyValue;

		const paymentAmount = qtyValue * 20000;
		document.getElementById('totalAmount').innerText = paymentAmount.toLocaleString();
		document.getElementById('input_totalAmount').value = paymentAmount;
	</script>

	<script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js" ></script>
		
	<script src="{% static 'mgapp/js/jquery-3.4.1.min.js'%}"></script>
	<script src="{% static 'mgapp/js/popper.min.js'%}"></script>
	<script src="{% static 'mgapp/js/bootstrap.min.js'%}"></script>
	<script src="{% static 'mgapp/js/owl.carousel.min.js'%}"></script>
	<script src="{% static 'mgapp/js/jquery.animateNumber.min.js'%}"></script>
	<script src="{% static 'mgapp/js/jquery.waypoints.min.js'%}"></script>
	<script src="{% static 'mgapp/js/jquery.fancybox.min.js'%}"></script>
	<script src="{% static 'mgapp/js/aos.js'%}"></script>
	<script src="{% static 'mgapp/js/moment.min.js'%}"></script>
	<script src="{% static 'mgapp/js/daterangepicker.js'%}"></script>

	<script src="{% static 'mgapp/js/typed.js'%}"></script>
	<script>
		$(function() {
			var slides = $('.slides'),
			images = slides.find('img');

			images.each(function(i) {
				$(this).attr('data-id', i + 1);
			})

			var typed = new Typed('.typed-words', {
				strings: ["다대포 ","영도 ","자갈치 ", "송도",],
				typeSpeed: 80,
				backSpeed: 80,
				backDelay: 4000,
				startDelay: 1000,
				loop: true,
				showCursor: true,
				preStringTyped: (arrayPos, self) => {
					arrayPos++;
					console.log(arrayPos);
					$('.slides img').removeClass('active');
					$('.slides img[data-id="'+arrayPos+'"]').addClass('active');
				}

			});
		})
	</script>

	<script src="{% static 'mgapp/js/custom.js'%}"></script>
	<script type="text/javascript" src="/cms/js/makePCookie.js"></script>
</body>

</html>
