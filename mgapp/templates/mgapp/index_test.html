{% load static %}
<!-- /*
* Template Name: Tour
* Template Author: Untree.co
* Tempalte URI: https://untree.co/
* License: https://creativecommons.org/licenses/by/3.0/
*/ -->
<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="author" content="Untree.co">
	<link rel="shortcut icon" href="favicon.png">

	<meta name="description" content="" />
	<meta name="keywords" content="bootstrap, bootstrap4" />

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Source+Serif+Pro:wght@400;700&display=swap" rel="stylesheet">

	<link rel="stylesheet" href="{% static 'mgapp/css/bootstrap.min.css'%}">
	<link rel="stylesheet" href="{% static 'mgapp/css/owl.carousel.min.css'%}">
	<link rel="stylesheet" href="{% static 'mgapp/css/owl.theme.default.min.css'%}">
	<link rel="stylesheet" href="{% static 'mgapp/css/jquery.fancybox.min.css'%}">
	<link rel="stylesheet" href="{% static 'mgapp/fonts/icomoon/style.css'%}">
	<link rel="stylesheet" href="{% static 'mgapp/fonts/flaticon/font/flaticon.css'%}">
	<link rel="stylesheet" href="{% static 'mgapp/css/daterangepicker.css'%}">
	<link rel="stylesheet" href="{% static 'mgapp/css/aos.css'%}">
	<link rel="stylesheet" href="{% static 'mgapp/css/style.css'%}">


	<link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/album/">

    
	<script src="{% static 'mgapp/css/assets/js/color-modes.js'%}"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/n pm/@docsearch/css@3">
	<link href="{% static 'mgapp/css/assets/dist/css/bootstrap.min.css'%}" rel="stylesheet">
	<style>
		@import url("https://fonts.googleapis.com/css2?family=Roboto&display=swap");
        tr:hover {
            background-color:skyblue;
        }
	</style>
	<title>bigwave</title>
</head>

<body>

    <header>
		<div class="site-mobile-menu site-navbar-target">
		  <div class="site-mobile-menu-header">
			  <div class="site-mobile-menu-close">
				  <span class="icofont-close js-menu-toggle"></span>
			  </div>
		  </div>
		  <div class="site-mobile-menu-body"></div>
	  </div>
	  
	  <nav class="site-nav">
	  
			  <div class="site-navigation">
				  <a href="/" class="logo m-0"><img src="{% static "mainapp/free-css/images/로고색.png" %}" alt="" style="width: 300px; height: 50px;" ></a> 
				  {% comment %} <span class="text-primary">bigwave</span> {% endcomment %}
	  
				  <ul class="js-clone-nav d-none d-lg-inline-block text-left site-menu float-right">
					  <li class="active"><a href="/">서비스 소개</a></li>
					  <li class="active"><a href="/mg/test/">선착장예약</a></li>
					  <li><a href="/je/service/">교통/관광 서비스</a></li>
					  <li><a href="/je/service/chatbotiframe/">챗봇 서비스</a></li>
					  </li>
					  {% if request.session.ses_mem_id == None %}
					  <li><a href="/login2/">로그인</a></li>
					  <li><a href="/signup2/">회원가입</a></li>
					  {% else %}
					  <li><a href="/mg/booking/">예약확인</a></li>
					  <li><a href="/mypage/">회원정보</a></li>
					  <li><a href="/logout/">로그아웃</a></li>
					  {% endif %}
				  </ul>
	  
				  <a href="#" class="burger ml-auto float-right site-menu-toggle js-menu-toggle d-inline-block d-lg-none light" data-toggle="collapse" data-target="#main-navbar">
					  <span></span>
				  </a>
	  
			  </div>
	  </nav>
	</header>
	<div class="hero" background-color style="background: linear-gradient(to left, #3F72AF, #b4caf2);">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-lg-7">
					<div class="intro-wrap">
						<h1 class="mb-5"><span class="d-block">Marine Taxi</span>Booking service
							<br><span class="typed-words"></span></h1>
						<div class="row">
							<div class="col-12">
								<form class="form" id="fm" method="GET" action="#" onsubmit="return validateForm()">
									<div class="row mb-2">
										<div class="col-sm-12 cl-md-6 mb-3 mb-lg-0 col-lg-6">
											<select name="start" id="start" class="form-control custom-select" onchange="changeP_nm()">
												<option value="" {% if not selected_start %}selected{% endif %}>출발지를 선택하세요</option>
												{% for row in marina_list %}
												<option value="{{row.mar_nm}}">{{row.mar_nm}}</option>
												{% endfor %}
											</select>
										</div>
										<br>
										<div class="col-sm-12 col-md-6 mb-3 mb-lg-0 col-lg-6">
											<select name="end" id="end" class="form-control custom-select">
												<option value="" {% if not selected_end %}selected{% endif %}>도착지를 선택하세요</option>
											</select>
										</div>
										<div class="col-sm-12 col-md-6 mb-3 mb-lg-0 col-lg-6">
											<input type="text" class="form-control" name="daterange">
										</div>
										<div class="col-sm-12 col-md-6 mb-3 mb-lg-0 col-lg-6">
											<select name="qty" id="qty" class="form-control custom-select">
												<option value="">탑승객수</option>
												<option value="1">1인</option>
												<option value="2">2인</option>
												<option value="3">3인</option>
												<option value="4">4인</option>
												<option value="5">5인</option>
											</select>
										</div>
										{% comment %} <div class="col-lg-8">
											<label class="control control--checkbox mt-3">
												<span class="caption">Save this search</span>
												<input type="checkbox" checked="checked" />
												<div class="control__indicator"></div>
											</label>
										</div> {% endcomment %}
									</div>
									<div class="row align-items-center">
										<div class="col-sm-10 col-md-3 mb-3 mb-lg-1 col-lg-12">
											<input type="submit" class="btn btn-primary btn-block" value="검색하기">
										</div>
									</div>
								</form>
							</div>

						</div>
					</div>
				</div>
				<div class="col-lg-5">

					<div class="slides">
						<img src="{% static 'mgapp/images/hero-slider-1.jpg'%}" alt="Image" class="img-fluid active">
						<img src="{% static 'mgapp/images/hero-slider-2.jpg'%}" alt="Image" class="img-fluid">
						<img src="{% static 'mgapp/images/hero-slider-3.jpg'%}" alt="Image" class="img-fluid">
						<img src="{% static 'mgapp/images/hero-slider-4.jpg'%}" alt="Image" class="img-fluid">
						<img src="{% static 'mgapp/images/hero-slider-5.jpg'%}" alt="Image" class="img-fluid">
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<div class="untree_co-section">
		
		<div class="container">
			<div class="row mb-5 justify-content-center" style="padding-top: 100px;">
				<div class="col-lg-12 text-center">
					<div class="row">
						<div class="col-12">
							<form class="form" id="scheduleForm" method="GET" action="/mg/check/">
								<table  class="rwd-table">
									<tbody>
										<tr>
											<th style="font-size: 20px;">선택하기</th>
											<th style="font-size: 20px;">번호</th>
											<th style="font-size: 20px;">출발지</th>
											<th style="font-size: 20px;">도착지</th>

										</tr>
										{% if schedule %}
										{% for row3 in schedule %}
										<tr class="KOTRA-fontsize-80">
											<td><input type="radio" name="selected_schedule" value="{{ row3.sch_no }}"></td>
											<td><p2 style="font-size: 25px;font-weight: 700;">1</p2></td>
											<td><p2 style="font-size: 25px;font-weight: 700;">{{ row3.sch_marina }}</p2><br><p style="font-size: 18px;">{{ row3.sch_stime }}</p></td>
											<td><p2 style="font-size: 25px;font-weight: 700;">{{ row3.sch_arrival }}</p2><br><p style="font-size: 18px;">{{ row3.sch_stime }}</p></td>
										</tr>
										{% endfor %}
										{% else %}
										<tr>
											<td colspan="4" style="height: 50px; width: 100%;">상세 항목을 선택해 주세요</td>
										</tr>
										{% endif %}
										
										<tr class="KOTRA-fontsize-80" {% if not schedule %}style="display: none;"{% endif %}>
											<input type="hidden" name="qty" value="{{ qty }}">
											<td colspan="4"><input type="submit" value="예약" style="height: 50px; width: 100%;"></td>
										</tr>
									
									</tbody>
								</table>
								{% comment %} <div class="row mb-8 lg-12" style="padding-top: 50px;">
									<table border="2" style="width: 91%;height: 100%;">
										<tr >
											<th style="color: black;">번호</th>
											<th style="color: black; font-size: 27px;" >출발지</th>
											<th style="font-size: 27px;">도착지</th>
											<th style="color: black;">예약하기</th>

										</tr>
										{% for row3 in schedule %}
										<tr>
											<td style="color: black;"><input type="radio" name="selected_schedule" value="{{ row3.sch_no }}"></td>
											
											<td style="color: black;"><p2 style="font-size: 35px;font-weight: 700;">1</td></p2>
											<td style="color: black;"><p2 style="font-size: 35px;font-weight: 700;">{{ row3.sch_marina }}</p2>
												<br><p style="font-size: 18px;">{{ row3.sch_stime }}</p></td>
											<td style="color: black;"><p2 style="font-size: 35px;font-weight: 700;">{{ row3.sch_arrival }}</p2>
												<br><p style="font-size: 18px;">{{ row3.sch_stime }}</p></td>
												<input type="hidden" name="qty" value="{{ qty }}" style="color: black;">
											<td><input type="submit" value="예약" style="color: black;height: 100%;width: 100%;"	></td>
										</tr>
										{% endfor %}
									</table>
								</div> {% endcomment %}
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<script>
		document.getElementById('scheduleForm').addEventListener('submit', function(e) {
			const selectedSchedule = document.querySelector('[name="selected_schedule"]:checked');
	
			// 스케줄 체크 안되어있을때
			if (!selectedSchedule) {
				alert('스케줄을 선택하여 주세요.');
				e.preventDefault();
				return;
			}
	
			// 선택한 라디오 버튼의 sch_no 값을 가져옵니다.
			const selectedSchNo = selectedSchedule.value;
	
		});
	</script>

	</div>
	<div id="overlayer"></div>
	<div class="loader">
		<div class="spinner-border" role="status">
			<span class="sr-only">Loading...</span>
		</div>
	</div>
	<script>
		function updateSearchResults(schedule) {
			alert("===========");
			const searchResultsDiv = document.getElementById('searchResults');
			const table = document.createElement('table');
			table.border = '1';
	
			const thead = document.createElement('thead');
			const headerRow = document.createElement('tr');
			headerRow.innerHTML = `
				<th>선택</th>
				<th>출발지</th>
				<th>도착지</th>
				<th>출발시간</th>
				<th>도착시간</th>
			`;
			thead.appendChild(headerRow);
			table.appendChild(thead);
	
			const tbody = document.createElement('tbody');
			schedule.forEach(row => {
				const rowElement = document.createElement('tr');
				rowElement.innerHTML = `
					<td><input type="radio" name="selected_schedule" value="${row.sch_no}"></td>
					<td>${row.sch_marina}</td>
					<td>${row.sch_arrival}</td>
					<td>${row.sch_stime}</td>
					<td>${row.sch_etime}</td>
				`;
				tbody.appendChild(rowElement);
			});
			table.appendChild(tbody);
	
			// 이전 검색 결과를 지우고 새로운 결과를 추가
			searchResultsDiv.innerHTML = '';
			searchResultsDiv.appendChild(table);
		}
	
		function changeP_nm() {
			const startSelect = document.getElementById('start');
			const destinationSelect = document.getElementById('end');
			const selectedValue = startSelect.value;
			const selectedQty = document.getElementById('qty').value;
	
			// 두 번째 select 박스 초기화
			destinationSelect.innerHTML = '<option value="">도착지를 선택하세요</option>';
	
			for (let option of startSelect.options) {
				if (option.value !== "" && option.value !== selectedValue) {
					const newOption = document.createElement('option');
					newOption.value = option.value;
					newOption.innerText = option.innerText;
					destinationSelect.appendChild(newOption);
				}
			}
		}
	
		function validateForm() {
			const startSelect = document.getElementById('start');
			const destinationSelect = document.getElementById('end');
			const qtySelect = document.getElementById('qty');
			if (!startSelect.value || !destinationSelect.value || !qtySelect.value) {
				alert("모든 항목을 선택하여 주세요!");
				return false;
			}
			// return true;
			fm = document.getElementById('fm');
			fm.action = "/mg/test/";
			fm.submit();
		}
	
		// 페이지가 로드되면 changeP_nm() 함수를 실행하여 도착지 셀렉트 박스를 초기화합니다.
		window.onload = function () {
			changeP_nm();
		};
	
		// 폼 제출 시 검색 결과 업데이트
		const form = document.getElementById('fm');
		form.addEventListener('submit', function (event) {
			event.preventDefault(); // 폼 제출 방지
	
			const formData = new FormData(form);
			fetch('/mg/test/', {
				method: 'POST',
				body: formData,
			})
			.then(response => response.json())
			.then(data => {
				if (data.schedule) {
					updateSearchResults(data.schedule);
				}
			})
			.catch(error => {
				console.error('Error:', error);
			});
		});
		document.addEventListener('DOMContentLoaded', function () {
			// 이동할 대상 요소를 선택합니다. 클래스 이름이 "untree_co-section"인 첫 번째 요소를 선택합니다.
			var targetElement = document.querySelector('.untree_co-section');
		
			if (targetElement) {
				// 스크롤 애니메이션 옵션 설정
				var scrollOptions = {
					top: targetElement.offsetTop, // 대상 요소의 상단 위치로 이동
					left: 0, // 가로 스크롤은 0으로 설정
					behavior: 'smooth' // 부드러운 스크롤 애니메이션 사용
				};
		
				// 스크롤 이동 실행
				window.scrollTo(scrollOptions);
			}
		});
	</script>
	<script src="{% static 'mgapp/js/jquery-3.4.1.min.js'%}"></script>
	<script src="{% static 'mgapp/js/popper.min.js'%}"></script>
	<script src="{% static 'mgapp/js/bootstrap.min.js'%}"></script>
	<script src="{% static 'mgapp/js/owl.carousel.min.js'%}"></script>
	<script src="{% static 'mgapp/js/jquery.animateNumber.min.js'%}"></script>
	<script src="{% static 'mgapp/js/jquery.waypoints.min.js'%}"></script>
	<script src="{% static 'mgapp/js/jquery.fancybox.min.js'%}"></script>
	<script src="{% static 'mgapp/js/aos.js'%}"></script>
	<script src="{% static 'mgapp/js/moment.min.js'%}"></script>
	<script src="{% static 'mgapp/js/daterangepicker.js'%}"></script>

	<script src="{% static 'mgapp/js/typed.js'%}"></script>
	<script>
		$(function() {
			var slides = $('.slides'),
			images = slides.find('img');

			images.each(function(i) {
				$(this).attr('data-id', i + 1);
			})

			var typed = new Typed('.typed-words', {
				strings: ["기장 ","영도 ","자갈치 ", "송도",'해운대'],
				typeSpeed: 80,
				backSpeed: 80,
				backDelay: 4000,
				startDelay: 1000,
				loop: true,
				showCursor: true,
				preStringTyped: (arrayPos, self) => {
					arrayPos++;
					console.log(arrayPos);
					$('.slides img').removeClass('active');
					$('.slides img[data-id="'+arrayPos+'"]').addClass('active');
				}

			});
		})
	</script>

	<script src="{% static 'mgapp/js/custom.js'%}"></script>

</body>

</html>
